<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FINSI — Appointment</title>
    <meta name="theme-color" content="#0b5cff">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="appointment.css">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../static/supabaseClient.js"></script>
</head>
<body>
    <header>
        <div class="container nav">
            <a href="../homepage/homepage.html#home" class="brand"><img src="../static/Finsi.png" alt="FINSI" style="height:56px; width:auto;"></a>
            <nav>
                <ul id="menu">
                    <li><a href="../homepage/homepage.html#home">Home</a></li>
                    <li><a href="appointment.html" id="appointmentLink">Appointment</a></li>
                    <li><a id="statusLink" class="disabled-link" href="../status/status.html" aria-disabled="true" title="Login required">Status</a></li>
                </ul>
            </nav>
            <div class="auth-actions">
                <div class="profile">
                    <button type="button" class="profile-btn" id="profileBtn">
                        <span id="welcomeLabel">Loading...</span>
                        <span class="badge">...</span>
                    </button>
                    <div class="profile-dropdown" id="profileMenu">
                        <button type="button" onclick="logout()">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section class="page-hero">
            <div class="container">
                <h1>Appointment Calendar</h1>
                <div class="sub">Select from available dates below.</div>
            </div>
        </section>
        <section>
            <div class="container cal-form">
                <div class="calendar">
                    <div class="cal-header">
                        <div class="cal-title" id="calTitle">Month YYYY</div>
                        <div class="cal-nav">
                            <button class="cal-btn" type="button" id="prevBtn">‹ Prev</button>
                            <button class="cal-btn" type="button" id="todayBtn">Today</button>
                            <button class="cal-btn" type="button" id="nextBtn">Next ›</button>
                        </div>
                    </div>
                    <div class="cal-weekday">
                        <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
                    </div>
                    <div class="cal-grid" id="calGrid"></div>
                </div>
                <form class="form-card" id="appointmentForm">
                    <h2>Appointment</h2>
                    <div class="form-field">
                        <label class="form-label">Date</label>
                        <input class="text" id="apptDate" type="text" placeholder="Select a date from the calendar" readonly>
                    </div>
                    <div class="form-field">
                        <label class="form-label">Type of Appointment</label>
                        <select class="select" id="apptType">
                            <option value="Services">Services</option>
                            <option value="Consultation">Consultation</option>
                            <option value="Maintenance">Maintenance</option>
                            <option value="Installation">Installation</option>
                            <option value="Repair">Repair</option>
                            <option value="Inspection">Inspection</option>
                            <option value="Upgrade">Upgrade</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-field" id="customTypeField" style="display: none;">
                        <label class="form-label">Please specify the appointment type</label>
                        <input class="text" id="customApptType" type="text" placeholder="Enter custom appointment type">
                    </div>
                    <div class="form-field">
                        <label class="form-label">Urgency</label>
                        <div class="urgency-list">
                            <label class="urgency-item"><span class="dot low"></span><input type="radio" name="urgency" value="Low" checked style="margin:0 6px 0 0">Low</label>
                            <label class="urgency-item"><span class="dot med"></span><input type="radio" name="urgency" value="Medium" style="margin:0 6px 0 0">Medium</label>
                            <label class="urgency-item"><span class="dot high"></span><input type="radio" name="urgency" value="High" style="margin:0 6px 0 0">High</label>
                        </div>
                    </div>
                    <div class="form-field">
                        <label class="form-label">Item Details / Task Description</label>
                        <textarea class="textarea" id="apptDesc" placeholder="Describe the task"></textarea>
                    </div>
                    <div class="form-field">
                        <label class="form-label">Site</label>
                        <input class="text" id="apptSite" type="text" placeholder="Enter site location">
                    </div>
                    <div class="submit-btn">
                        <button type="submit" class="btn-submit">Submit</button>
                    </div>
                    <div id="submitStatus" style="text-align:center; margin-top:8px; font-size:13px; color:#0b1020"></div>
                </form>
            </div>
        </section>
    </main>

    <footer>
        <div class="container" style="margin-top:10px; text-align:center; font-size:14px">
            © 2021 FINSI. All rights reserved.
        </div>
    </footer>

    <div class="modal-overlay"></div>

    <script src="appointment.js"></script>
</body>
</html>
